From 7044480ec7ded1835004d8fe1cd72a401fc8d548 Mon Sep 17 00:00:00 2001
From: Ethan Wei <ethanwei@ami.com>
Date: Tue, 11 Jul 2023 13:55:10 +0800
Subject: [PATCH] Not set gateway6 and retain current value if incoming
 gateway6 is empty 	modified:   src/ethernet_interface.cpp

---
 src/ethernet_interface.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/ethernet_interface.cpp b/src/ethernet_interface.cpp
index 6689f05..2c7a43b 100644
--- a/src/ethernet_interface.cpp
+++ b/src/ethernet_interface.cpp
@@ -273,10 +273,10 @@ ObjectPath EthernetInterface::ip(IP::Protocol protType, std::string ipaddress,
                 ip_address::isValidIPv6Addr((in6_addr*)&addr, ip_address::Type::IP6_ADDRESS);
                 if(!ipgateway.empty())
                 {
-                        gateway = ToAddr<in6_addr>{}(ipgateway);
-                        ip_address::isValidIPv6Addr((in6_addr*)&gateway, ip_address::Type::GATEWAY6_ADDRESS);
+                    gateway = ToAddr<in6_addr>{}(ipgateway);
+                    ip_address::isValidIPv6Addr((in6_addr*)&gateway, ip_address::Type::GATEWAY6_ADDRESS);
+                    EthernetInterfaceIntf::defaultGateway6(ipgateway);
                 }
-                defaultGateway6(ipgateway);
                 break;
             default:
                 throw std::logic_error("Exhausted protocols");
-- 
2.25.1


From 4e29073f975598bda39459a6df0f3b6981ca537b Mon Sep 17 00:00:00 2001
From: dhananjayb <dhananjayb@ami.com>
Date: Sat, 16 Dec 2023 04:29:35 +0530
Subject: [PATCH] Enable spidev for spi2 for cpld upgrade via spi interface
 intel

---
 arch/arm/boot/dts/aspeed-bmc-intel-ast2600.dts | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

diff --git a/arch/arm/boot/dts/aspeed-bmc-intel-ast2600.dts b/arch/arm/boot/dts/aspeed-bmc-intel-ast2600.dts
index 3f6177b52285..ad6e0cd259e2 100644
--- a/arch/arm/boot/dts/aspeed-bmc-intel-ast2600.dts
+++ b/arch/arm/boot/dts/aspeed-bmc-intel-ast2600.dts
@@ -177,6 +177,24 @@ flash3: flash@0 {
         };
 };
 
+&spi2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_spi2_default &pinctrl_spi2cs1_default
+				&pinctrl_spi2cs2_default &pinctrl_qspi2_default>;
+	status = "okay";
+	spidev@0 {
+	        status = "okay";
+	};
+
+	spidev@1 {
+	        status = "okay";
+	};
+
+	spidev@2 {
+	        status = "okay";
+	};
+};
+
 
 &espi {
 	status = "okay";
-- 
2.34.1


From 6ab2b0688ad540bd4362fa1972a2bbe3e9ac7e52 Mon Sep 17 00:00:00 2001
From: nibinc <nibinc@ami.com>
Date: Mon, 19 Jun 2023 04:50:28 -0400
Subject: [PATCH 48/48] changing maximum supported kvm session value to 1

---
 include/kvm_websocket.hpp                    | 2 +-
 redfish-core/include/utils/service_utils.hpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/kvm_websocket.hpp b/include/kvm_websocket.hpp
index 3fa753e6..ce53f681 100644
--- a/include/kvm_websocket.hpp
+++ b/include/kvm_websocket.hpp
@@ -12,7 +12,7 @@ namespace crow
 namespace obmc_kvm
 {
 
-static constexpr const uint maxSessions = 4;
+static constexpr const uint maxSessions = 1;
 int kvmActiveStatus = 0;
 
 class KvmSession
diff --git a/redfish-core/include/utils/service_utils.hpp b/redfish-core/include/utils/service_utils.hpp
index 42691b9e..7caa68eb 100644
--- a/redfish-core/include/utils/service_utils.hpp
+++ b/redfish-core/include/utils/service_utils.hpp
@@ -76,7 +76,7 @@ void getEnabled(const std::shared_ptr<bmcweb::AsyncResp>& asyncResp,
                                     asyncResp->res.jsonValue[valueJsonPtr] =
                                         true;
 				    if (serviceName == "start_2dipkvm")
-					    asyncResp->res.jsonValue["GraphicalConsole"]["MaxConcurrentSessions"] = 4;
+					    asyncResp->res.jsonValue["GraphicalConsole"]["MaxConcurrentSessions"] = 1;
                                     return;
                                 }
 				else
-- 
2.17.1


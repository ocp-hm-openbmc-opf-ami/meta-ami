From c4703716b9f58390fdcf19109170b2a062f76ebf Mon Sep 17 00:00:00 2001
From: RythonCai <rythoncai@ami.com>
Date: Wed, 17 May 2023 21:48:11 +0800
Subject: [PATCH] add AutonomousCrashDump schema

---
 static/redfish/v1/$metadata/index.xml         |  4 +
 .../AMIAutonomousCrashDump/index.json         | 80 +++++++++++++++++++
 .../v1/schema/AMIAutonomousCrashDump_v1.xml   | 48 +++++++++++
 3 files changed, 132 insertions(+)
 create mode 100644 static/redfish/v1/JsonSchemas/AMIAutonomousCrashDump/index.json
 create mode 100644 static/redfish/v1/schema/AMIAutonomousCrashDump_v1.xml

diff --git a/static/redfish/v1/$metadata/index.xml b/static/redfish/v1/$metadata/index.xml
index d50680663..3b7bd13c9 100644
--- a/static/redfish/v1/$metadata/index.xml
+++ b/static/redfish/v1/$metadata/index.xml
@@ -2845,4 +2845,8 @@
         <edmx:Include Namespace="PefService"/>
         <edmx:Include Namespace="PefService.v1_0_0"/>
    </edmx:Reference>
+   <edmx:Reference Uri="/redfish/v1/schema/AMIAutonomousCrashDump_v1.xml">
+        <edmx:Include Namespace="AMIAutonomousCrashDump"/>
+        <edmx:Include Namespace="AMIAutonomousCrashDump.v1_0_0"/>
+   </edmx:Reference>
 </edmx:Edmx>
diff --git a/static/redfish/v1/JsonSchemas/AMIAutonomousCrashDump/index.json b/static/redfish/v1/JsonSchemas/AMIAutonomousCrashDump/index.json
new file mode 100644
index 000000000..da7fd2ad2
--- /dev/null
+++ b/static/redfish/v1/JsonSchemas/AMIAutonomousCrashDump/index.json
@@ -0,0 +1,80 @@
+{
+    "$schema": "http://redfish.dmtf.org/schemas/v1/AMIAutonomousCrashDump.v1_0_0.json",
+    "$ref": "#/definitions/AMIAutonomousCrashDump",
+    "definitions": {
+        "AMIAutonomousCrashDump": {
+            "additionalProperties": false,
+            "description": "This allows additional configuring of the ACD service.",
+            "longDescription": "This allows additional configuring of the ACD service.",
+            "patternProperties": {
+                "^([a-zA-Z_][a-zA-Z0-9_]*)?@(odata|Redfish|Message)\\.[a-zA-Z_][a-zA-Z0-9_]*$": {
+                    "description": "This property shall specify a valid odata or Redfish property.",
+                    "type": [
+                        "array",
+                        "boolean",
+                        "integer",
+                        "number",
+                        "null",
+                        "object",
+                        "string"
+                    ]
+                }
+            },
+            "properties": {
+                "@odata.context": {
+                    "$ref": "http://redfish.dmtf.org/schemas/v1/odata-v4.json#/definitions/context"
+                },
+                "@odata.etag": {
+                    "$ref": "http://redfish.dmtf.org/schemas/v1/odata-v4.json#/definitions/etag"
+                },
+                "@odata.id": {
+                    "$ref": "http://redfish.dmtf.org/schemas/v1/odata-v4.json#/definitions/id"
+                },
+                "@odata.type": {
+                    "$ref": "http://redfish.dmtf.org/schemas/v1/odata-v4.json#/definitions/type"
+                },
+                "DebugLogs": {
+                    "description": "The URL for Collection of Debug Files.",
+                    "items": {
+                        "type": "string"
+                    },
+                    "type": "array"
+                },
+                "Description": {
+                    "anyOf": [
+                        {
+                            "$ref": "http://redfish.dmtf.org/schemas/v1/Resource.json#/definitions/Description"
+                        },
+                        {
+                            "type": "null"
+                        }
+                    ],
+                    "readonly": true
+                },
+                "Enabled": {
+                    "description": "The property signifies if the AutonomousCrashDump is enabled or disabled.",
+                    "longDescription": "The property signifies if the AutonomousCrashDump is enabled or disabled.",
+                    "readonly": false,
+                    "type": "boolean"
+                },
+                "Id": {
+                    "$ref": "http://redfish.dmtf.org/schemas/v1/Resource.json#/definitions/Id",
+                    "readonly": true
+                },
+                "Name": {
+                    "$ref": "http://redfish.dmtf.org/schemas/v1/Resource.json#/definitions/Name",
+                    "readonly": true
+                }
+            },
+            "required": [
+                "@odata.id",
+                "@odata.type",
+                "Id",
+                "Name"
+            ],
+            "type": "object"
+        }
+    },
+    "owningEntity": "AMI",
+    "title": "#AMIAutonomousCrashDump.v1_0_0.AMIAutonomousCrashDump"
+}
diff --git a/static/redfish/v1/schema/AMIAutonomousCrashDump_v1.xml b/static/redfish/v1/schema/AMIAutonomousCrashDump_v1.xml
new file mode 100644
index 000000000..fd9f6f616
--- /dev/null
+++ b/static/redfish/v1/schema/AMIAutonomousCrashDump_v1.xml
@@ -0,0 +1,48 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
+    <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/errata03/csd01/complete/vocabularies/Org.OData.Core.V1.xml">
+        <edmx:Include Namespace="Org.OData.Core.V1" Alias="OData"/>
+    </edmx:Reference>
+    <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/errata03/csd01/complete/vocabularies/Org.OData.Capabilities.V1.xml">
+        <edmx:Include Namespace="Org.OData.Capabilities.V1" Alias="Capabilities"/>
+    </edmx:Reference>
+    <edmx:Reference Uri="http://redfish.dmtf.org/schemas/v1/Resource_v1.xml">
+        <edmx:Include Namespace="Resource"/>
+        <edmx:Include Namespace="Resource.v1_0_0"/>
+    </edmx:Reference>
+    <edmx:DataServices>
+        <Schema Namespace="AMIAutonomousCrashDump" xmlns="http://docs.oasis-open.org/odata/ns/edm">
+          <ComplexType Name="AMIAutonomousCrashDump" BaseType="Resource.v1_0_0.Resource">
+            <Annotation Term="OData.Description" String="This is the schema definition for the configuration resource."/>
+            <Annotation Term="OData.LongDescription" String="This is the schema definition for the configuration resource."/>
+            <Annotation Term="Capabilities.InsertRestrictions">
+              <Record>
+                <PropertyValue Property="Insertable" Bool="false"/>
+              </Record>
+            </Annotation>
+            <Annotation Term="Capabilities.UpdateRestrictions">
+              <Record>
+                <PropertyValue Property="Updatable" Bool="false"/>
+              </Record>
+            </Annotation>
+            <Annotation Term="Capabilities.DeleteRestrictions">
+              <Record>
+                <PropertyValue Property="Deletable" Bool="false"/>
+              </Record>
+            </Annotation>
+          </ComplexType>
+        </Schema>
+    	<Schema Namespace="AMIAutonomousCrashDump.v1_0_0" xmlns="http://docs.oasis-open.org/odata/ns/edm">
+          <Annotation Term="Redfish.OwningEntity" String="AMI"/>
+            <ComplexType Name="AMIAutonomousCrashDump" BaseType="AMIAutonomousCrashDump.AMIAutonomousCrashDump">
+                <Annotation Term="OData.Description" String="This allows additional configuring of the Redfish service."/>
+                <Annotation Term="OData.LongDescription" String="This allows additional configuring of the Redfish service."/>
+                <Property Name="Enabled" Type="Edm.Boolean" Nullable="false">
+                    <Annotation Term="OData.Permissions" EnumMember="OData.Permission/ReadWrite"/>
+                    <Annotation Term="OData.Description" String="The property signifies if the AutonomousCrashDump is enabled or disabled."/>
+                    <Annotation Term="OData.LongDescription" String="The property signifies if the AutonomousCrashDump is enabled or disabled."/>
+                </Property>
+            </ComplexType>
+        </Schema>
+    </edmx:DataServices>
+</edmx:Edmx>
-- 
2.34.1


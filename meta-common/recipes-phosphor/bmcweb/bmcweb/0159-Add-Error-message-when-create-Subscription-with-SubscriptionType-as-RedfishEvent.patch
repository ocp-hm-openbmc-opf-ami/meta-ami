From e03741bca1a672db9993e42bdc24662be3d5a81f Mon Sep 17 00:00:00 2001
From: muthulakshmin <muthulakshmin@ami.com>
Date: Tue, 12 Dec 2023 16:15:39 +0530
Subject: [PATCH 159/159] Add Error message when create Subscription with
 SubscriptionType as RedfishEvent

Signed-off-by: muthulakshmin <muthulakshmin@ami.com>
---
 redfish-core/lib/event_service.hpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/redfish-core/lib/event_service.hpp b/redfish-core/lib/event_service.hpp
index e4793866..5c2e0877 100644
--- a/redfish-core/lib/event_service.hpp
+++ b/redfish-core/lib/event_service.hpp
@@ -488,6 +488,12 @@ inline void requestRoutesEventDestinationCollection(App& app)
                 return;
             }
 
+            if (*subscriptionType == "RedfishEvent")
+            {
+                messages::propertyValueConflict(asyncResp->res, "SubscriptionType",
+                                                    "Protocol");
+                return;
+            }
             addSnmpTrapClient(asyncResp, host, port);
             return;
         }
-- 
2.34.1


From e895826574a6bb7a53377eeae999c0936c028404 Mon Sep 17 00:00:00 2001
From: Pranoy Goru <gorumanip@ami.com>
Date: Mon, 12 Jun 2023 11:54:58 +0530
Subject: [PATCH 36/36] fix-StateChange-not-getting-updated-issue

---
 redfish-core/lib/update_service.hpp | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/redfish-core/lib/update_service.hpp b/redfish-core/lib/update_service.hpp
index 5db7e50c..c92f0364 100644
--- a/redfish-core/lib/update_service.hpp
+++ b/redfish-core/lib/update_service.hpp
@@ -238,15 +238,14 @@ static void
 
                         if (iface == "xyz.openbmc_project.Software.Activation")
                         {
-                            std::string* state = nullptr;
+                            const std::string* state = nullptr;
                             for (const auto& property : values)
                             {
                                 if (property.first == "Activation")
                                 {
-                                    const std::string* activationState =
-                                        std::get_if<std::string>(
+                                    state = std::get_if<std::string>(
                                             &property.second);
-                                    if (activationState == nullptr)
+                                    if (state == nullptr)
                                     {
                                         taskData->messages.emplace_back(
                                             messages::internalError());
-- 
2.17.1


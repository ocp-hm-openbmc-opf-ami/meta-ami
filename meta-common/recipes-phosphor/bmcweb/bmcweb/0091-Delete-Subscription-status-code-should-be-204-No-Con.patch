From 4d9a659d56968c57a83298332fad6dd4fefe59b9 Mon Sep 17 00:00:00 2001
From: gokulp <gokulp@ami.com>
Date: Wed, 16 Aug 2023 15:55:50 +0530
Subject: [PATCH 2418/2418] Delete Subscription status code should be 204 No
 Content

---
 redfish-core/lib/event_service.hpp | 20 +++++++++++---------
 1 file changed, 11 insertions(+), 9 deletions(-)

diff --git a/redfish-core/lib/event_service.hpp b/redfish-core/lib/event_service.hpp
index 8348f0f9..64d42c1f 100644
--- a/redfish-core/lib/event_service.hpp
+++ b/redfish-core/lib/event_service.hpp
@@ -825,11 +825,21 @@ inline void requestRoutesEventDestination(App& app)
             return;
         }
 
+        if (param.starts_with("snmp"))
+        {
+            deleteSnmpTrapClient(asyncResp, param);
+            EventServiceManager::getInstance().deleteSubscription(param);
+            return;
+        }
+
+        EventServiceManager::getInstance().deleteSubscription(param);
+
         std::shared_ptr<Subscription> subValue =
             EventServiceManager::getInstance().getSubscription(param);
+            
         if (subValue == nullptr)
         {
-            asyncResp->res.result(boost::beast::http::status::not_found);
+            asyncResp->res.result(boost::beast::http::status::no_content);
             return;
         }
 
@@ -839,14 +849,6 @@ inline void requestRoutesEventDestination(App& app)
             return;
         }
 
-	if (param.starts_with("snmp"))
-	{
-	    deleteSnmpTrapClient(asyncResp, param);
-	    EventServiceManager::getInstance().deleteSubscription(param);
-	    return;
-	}
-
-        EventServiceManager::getInstance().deleteSubscription(param);
         });
 }
 
-- 
2.34.1


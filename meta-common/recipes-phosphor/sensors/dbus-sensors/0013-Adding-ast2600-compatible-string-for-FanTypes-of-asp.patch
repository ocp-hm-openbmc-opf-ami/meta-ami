From d8fc1535395a96d49946b5bc1de41a44cd83bebf Mon Sep 17 00:00:00 2001
From: thrishalig <thrishalig@ami.com>
Date: Wed, 23 Aug 2023 10:20:31 +0530
Subject: [PATCH] Adding ast2600 compatible string for FanTypes of aspeed

Tested:

root@AMIOT-ae0c4b666b4b:~# ipmitool sensor list
System Airflow   | 29.000     | unspecified | ok    | na        | na        | na        | na        | na        | na
Status cpu0      | 0x0        | discrete   | 0x8000| na        | na        | na        | na        | na        | na
Status cpu1      | 0x0        | discrete   | 0x8000| na        | na        | na        | na        | na        | na
PSU1 In Current  | 1.716      | Amps       | ok    | na        | na        | na        | na        | na        | na
PSU1 Out Current | 15.000     | Amps       | ok    | na        | na        | na        | 96.000    | 106.000   | na
Cpu Energy CPU1  | 0.000      | unspecified | ok    | na        | 0.000     | 0.000     | 2503.200  | 3007.200  | na
Cpu Energy CPU2  | 0.000      | unspecified | ok    | na        | 0.000     | 0.000     | 2503.200  | 3007.200  | na
Dimm Energy CPU1 | na         | unspecified | na    | na        | 0.000     | 0.000     | 1495.200  | 1999.200  | na
Dimm Energy CPU2 | na         | unspecified | na    | na        | 0.000     | 0.000     | 1495.200  | 1999.200  | na
Platform Energy  | 0.000      | unspecified | ok    | na        | 0.000     | 0.000     | 2503.200  | 3007.200  | na
Platform Energy  | 0.000      | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 0            | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 1            | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 2            | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 3            | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 4            | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 5            | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 12           | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 13           | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 14           | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm 15           | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm PSU1 Fan 1   | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Pwm PSU1 Fan 2   | 39.984     | unspecified | ok    | na        | na        | na        | na        | na        | na
Fan 0            | 0.000      | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 1            | 0.000      | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 2            | 6566.000   | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 3            | 6762.000   | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 4            | 0.000      | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 5            | 0.000      | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 6            | 6566.000   | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 7            | 6664.000   | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 8            | 9016.000   | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
Fan 9            | 9114.000   | RPM        | ok    | na        | 1078.000  | 1274.000  | na        | na        | na
PSU1 Fan Speed 1 | 8142.000   | RPM        | ok    | na        | na        | na        | na        | na        | na
PSU1 Fan Speed 2 | 6962.000   | RPM        | ok    | na        | na        | na        | na        | na        | na

Signed-off-by: thrishalig <thrishalig@ami.com>
---
 src/FanMain.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/FanMain.cpp b/src/FanMain.cpp
index bd1bbe8..b7e1ccf 100644
--- a/src/FanMain.cpp
+++ b/src/FanMain.cpp
@@ -66,6 +66,7 @@ std::optional<RedundancySensor> systemRedundancy;
 static const std::map<std::string, FanTypes> compatibleFanTypes = {
     {"aspeed,ast2400-pwm-tacho", FanTypes::aspeed},
     {"aspeed,ast2500-pwm-tacho", FanTypes::aspeed},
+    {"aspeed,ast2600-pwm-tacho", FanTypes::aspeed},
     {"nuvoton,npcm750-pwm-fan", FanTypes::nuvoton},
     {"hpe,gxp-fan-ctrl", FanTypes::hpe}
     // add compatible string here for new fan type
-- 
2.25.1

